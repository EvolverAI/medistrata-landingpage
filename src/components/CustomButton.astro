---
import "@/styles/components/custom-button.css";

const {
    hoverEffect = "creative-fill",
    class: className = "",
    label,
    url,
} = Astro.props;
---

<a href={url} class={`custom-button ${hoverEffect} ${className}`}>
    <span class="button-text">{label}</span>
</a>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Add data-flip attribute for text flip effects
        const textFlipButtons = document.querySelectorAll(
            ".text-flip .button-text, .magnetic-text-flip .button-text",
        );
        textFlipButtons.forEach((text) => {
            const originalText = text.textContent;
            text.setAttribute("data-flip", originalText);
        });

        // Magnetic effect with cursor tracking
        const magneticButtons = document.querySelectorAll(
            ".magnetic, .magnetic-text-flip",
        );
        magneticButtons.forEach((button) => {
            button.addEventListener("mousemove", (e) => {
                const rect = button.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                button.style.transform = `translate(${x * 0.3}px, ${y * 0.3}px)`;
            });

            button.addEventListener("mouseleave", () => {
                button.style.transform = "";
            });
        });
    });
</script>
