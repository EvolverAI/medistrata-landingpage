---
import "@/styles/components/accordion.css";

const { label, group, expanded = false } = Astro.props;
const isExpanded = expanded === "true" || expanded === true;
---

<details open={isExpanded} data-group={group} class="accordion">
    <summary class="accordion-summary">{label}</summary>
    <div class="accordion-content">
        <slot />
    </div>
</details>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const details = document.querySelectorAll("details[data-group]");
        details.forEach((detail) => {
            detail.addEventListener("toggle", () => {
                if (detail.open) {
                    const group = detail.dataset.group;
                    details.forEach((d) => {
                        if (d !== detail && d.dataset.group === group) {
                            d.open = false;
                        }
                    });
                }
            });
        });
    });
</script>
